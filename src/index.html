<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>D3Angular2</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>
  <script type="text/javascript">
    if (!window._laq) { window._laq = []; }
    window._laq.push(function(){
        liveagent.showWhenOnline('5735F000000PFqw', document.getElementById('#dmccBtn'));
        liveagent.showWhenOffline('5735F000000PFqw', document.getElementById('#dmccBtnOff'));
    });
    
    // function to show the button
    window.onload = function() {
        showDMCCLC()
    };
    
    function showDMCCLC()
    {
        if (window.onload == true) {
            liveagent.showWhenOnline('5735F000000PFqw', document.getElementById("dmccBtn").style.display = "block");
            liveagent.showWhenOffline('5735F000000PFqw', document.getElementById("dmccBtnOff").style.display = "block");
        } else {
            liveagent.showWhenOnline('5735F000000PFqw', document.getElementById("dmccBtn").style.display = "block");
            liveagent.showWhenOffline('5735F000000PFqw', document.getElementById("dmccBtnOff").style.display = "block");
        }
    }
    
    function showChatWindow() {
        var button = document.getElementById("dmccBtn");
        if (button.innerHTML === 'Live Chat') {
            liveagent.startChatWithWindow('5735F000000PFqw','chatWindow');
            checkIframeLoaded();
        } else {
            button.innerHTML = 'Live Chat';
            document.getElementById('chatWindow').style.display = 'none';
        }
    }
    
    function checkIframeLoaded() {
        var iframe = document.getElementById('chatWindow');
        var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
    
        if (iframeDoc.readyState == 'complete') {
            showWindow();
        } 
    
        window.setTimeout(checkIframeLoaded, 100);
    }
    
    function showWindow() {
        var iframe = document.getElementById('chatWindow');
        iframe.style.display = 'block';
        document.getElementById("dmccBtn").innerHTML = 'Close Chat';
        var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
        var body = iframeDoc.getElementsByTagName("body")[0];
        if (body) {
            body.style.overflow = 'hidden';
        }
    }
    </script>
    
    <script type='text/javascript' src='https://c.la1-c2-ukb.salesforceliveagent.com/content/g/js/43.0/deployment.js'></script>
    <script type='text/javascript'>
        liveagent.init('https://d.la1-c2-ukb.salesforceliveagent.com/chat', '572100000008Utg', '00Db0000000aAZR');
    </script>
</body>
</html>
